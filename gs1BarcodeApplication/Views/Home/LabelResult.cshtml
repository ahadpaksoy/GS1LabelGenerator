@using System.Reflection
@using System.ComponentModel.DataAnnotations
@model gs1BarcodeApplication.Models.ProductLabelModel
@{
    ViewBag.Title = "GS1 Label Result";
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>GS1 Barcode Result</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
            background-color: #f8f9fa;
        }

        .barcode-img {
            max-width: 100%;
            height: auto;
        }

        .copy-btn {
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container py-5">
        <div class="card shadow-sm p-4">
            <h2 class="mb-4">✅ GS1 Barcode Generated</h2>
            <div class="row text-center mb-4">
                <div class="col-md-6">
                    <p><strong>Barcode</strong></p>
                    <img src="@ViewBag.BarcodeImage" class="img-thumbnail" alt="GS1 Barcode" />
                </div>
                <div class="col-md-6">
                    <p><strong>QR Code</strong></p>
                    <img src="@ViewBag.QrImage" class="img-thumbnail" alt="GS1 QR Code" />
                </div>
            </div>


            <div class="mb-3">
                <label class="form-label fw-bold">GS1 String</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="gs1String" value="@ViewBag.Gs1String" readonly>
                    <button class="btn btn-outline-secondary" type="button" onclick="copyGs1()">📋 Copy</button>
                </div>
            </div>
            <form method="post" action="/Home/ExportPdf">
                <input type="hidden" name="gs1String" value="@ViewBag.GS1String" />
                <input type="hidden" name="barcodeBase64" value="@ViewBag.BarcodeImage" />
                <input type="hidden" name="qrBase64" value="@ViewBag.QrImage" />
                <button type="submit" class="btn btn-primary mt-3">Download PDF</button>
            </form>



            <h5 class="mt-4">📋 Field Summary</h5>
            <table class="table table-bordered table-sm mt-2">
                <thead class="table-light">
                    <tr>
                        <th>Field</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody>
                    @{

                        var properties = Model.GetType().GetProperties();


                        foreach (var prop in properties)
                        {

                            var value = prop.GetValue(Model) as string;
                            if (!string.IsNullOrWhiteSpace(value))
                            {
                                var displayName = prop.GetCustomAttribute<DisplayAttribute>()?.Name ?? prop.Name;

                                <tr>
                                    <td>@displayName</td>
                                    <td>@value</td>
                                </tr>
                            }
                        }
                    }
                </tbody>
            </table>

            <div class="text-end mt-4">
                <a href="/Home/Index" class="btn btn-primary">🔄 Create Another Label</a>
            </div>
        </div>
    </div>

    <script>
        function copyGs1() {
            var copyText = document.getElementById("gs1String");
            copyText.select();
            copyText.setSelectionRange(0, 99999); // Mobile
            document.execCommand("copy");
            alert("Copied GS1 string!");
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
